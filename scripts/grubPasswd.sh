#!/bin/bash
DEBUG=false
main() {
    [ "$1" = "" ] && echo Uso: $0 '<nombre-usuario-para-entrar-en-grub>' && exit || USUARIO="$1"
    export DEST=""; export SUDO=""
    [ "$DEBUG" = "true" ] && DEST="/tmp" && SUDO=""
    [ "$DEBUG" != "true" ] &&  DEST="/etc/grub.d" && SUDO="sudo"
    scriptHalt | $SUDO tee $DEST/60_mioHalt
    scriptGrubPass $USUARIO $(passPbkdf2 $USUARIO) | $SUDO tee $DEST/50_grubPass
    [ -e $DEST/10_linux ] && [ ! -e $DEST/bak/10_linux.original ] && $SUDO mkdir $DEST/bak && $SUDO mv $DEST/10_linux $DEST/bak/10_linux.original
    script10Linux | base64 -d | $SUDO tee $DEST/10_linux &>/dev/null
    $SUDO chmod a+x $DEST/60_mioHalt $DEST/50_grubPass $DEST/10_linux
    $SUDO update-grub2
}    



scriptHalt() {
echo "
echo '

menuentry \"Halt\" --unrestricted {
   halt
}



'
" 
}
passPbkdf2() {
    echo "Introduzca la contraseña para $1, dos veces dándole al Intro cada vez." >&2
    PASS="PASS=$(grub-mkpasswd-pbkdf2)"
    echo $PASS | awk '{print $NF;}'
}    
scriptGrubPass() {
    USU="$1"
    PASS="$2"
    echo "
    echo '
set superusers=\"$USU\"
password_pbkdf2 $USU $PASS 
'
"
}

script10Linux () {
echo 'IyEgL2Jpbi9zaApzZXQgLWUKCiMgZ3J1Yi1ta2NvbmZpZyBoZWxwZXIgc2NyaXB0LgojIENvcHly
aWdodCAoQykgMjAwNiwyMDA3LDIwMDgsMjAwOSwyMDEwICBGcmVlIFNvZnR3YXJlIEZvdW5kYXRp
b24sIEluYy4KIwojIEdSVUIgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUg
aXQgYW5kL29yIG1vZGlmeQojIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwg
UHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CiMgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRh
dGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3IKIyAoYXQgeW91ciBvcHRp
b24pIGFueSBsYXRlciB2ZXJzaW9uLgojCiMgR1JVQiBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9w
ZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAojIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0
aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiMgTUVSQ0hBTlRBQklMSVRZIG9yIEZJ
VE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQojIEdOVSBHZW5lcmFsIFB1
YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiMKIyBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2
ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQojIGFsb25nIHdpdGgg
R1JVQi4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KCnByZWZp
eD0iL3VzciIKZXhlY19wcmVmaXg9Ii91c3IiCmRhdGFyb290ZGlyPSIvdXNyL3NoYXJlIgp1YnVu
dHVfcmVjb3Zlcnk9IjEiCnF1aWV0X2Jvb3Q9IjEiCnF1aWNrX2Jvb3Q9IjEiCmdmeHBheWxvYWRf
ZHluYW1pYz0iMSIKdnRfaGFuZG9mZj0iMSIKCi4gIiRwa2dkYXRhZGlyL2dydWItbWtjb25maWdf
bGliIgoKZXhwb3J0IFRFWFRET01BSU49Z3J1YgpleHBvcnQgVEVYVERPTUFJTkRJUj0iJHtkYXRh
cm9vdGRpcn0vbG9jYWxlIgoKQ0xBU1M9Ii0tY2xhc3MgZ251LWxpbnV4IC0tY2xhc3MgZ251IC0t
Y2xhc3Mgb3MiClNVUFBPUlRFRF9JTklUUz0ic3lzdmluaXQ6L2xpYi9zeXN2aW5pdC9pbml0IHN5
c3RlbWQ6L2xpYi9zeXN0ZW1kL3N5c3RlbWQgdXBzdGFydDovc2Jpbi91cHN0YXJ0IgoKaWYgWyAi
eCR7R1JVQl9ESVNUUklCVVRPUn0iID0gIngiIF0gOyB0aGVuCiAgT1M9R05VL0xpbnV4CmVsc2UK
ICBjYXNlICR7R1JVQl9ESVNUUklCVVRPUn0gaW4KICAgIFVidW50dXxLdWJ1bnR1KQogICAgICBP
Uz0iJHtHUlVCX0RJU1RSSUJVVE9SfSIKICAgICAgOzsKICAgICopCiAgICAgIE9TPSIke0dSVUJf
RElTVFJJQlVUT1J9IEdOVS9MaW51eCIKICAgICAgOzsKICBlc2FjCiAgQ0xBU1M9Ii0tY2xhc3Mg
JChlY2hvICR7R1JVQl9ESVNUUklCVVRPUn0gfCB0ciAnQS1aJyAnYS16JyB8IGN1dCAtZCcgJyAt
ZjF8TENfQUxMPUMgc2VkICdzLFteWzphbG51bTpdX10sXyxnJykgJHtDTEFTU30iCmZpCgojIGxv
b3AtQUVTIGFycmFuZ2VzIHRoaW5ncyBzbyB0aGF0IC9kZXYvbG9vcC9YIGNhbiBiZSBvdXIgcm9v
dCBkZXZpY2UsIGJ1dAojIHRoZSBpbml0cmRzIHRoYXQgTGludXggdXNlcyBkb24ndCBsaWtlIHRo
YXQuCmNhc2UgJHtHUlVCX0RFVklDRX0gaW4KICAvZGV2L2xvb3AvKnwvZGV2L2xvb3BbMC05XSkK
ICAgIEdSVUJfREVWSUNFPWBsb3NldHVwICR7R1JVQl9ERVZJQ0V9IHwgc2VkIC1lICJzL15bXihd
KihcKFteKV1cK1wpKS4qL1wxLyJgCiAgICAjIFdlIGNhbid0IGNvcGUgd2l0aCBkZXZpY2VzIGxv
b3AtbW91bnRlZCBmcm9tIGZpbGVzIGhlcmUuCiAgICBjYXNlICR7R1JVQl9ERVZJQ0V9IGluCiAg
ICAgIC9kZXYvKikgOzsKICAgICAgKikgZXhpdCAwIDs7CiAgICBlc2FjCiAgOzsKZXNhYwoKIyBi
dHJmcyBtYXkgcmVzaWRlIG9uIG11bHRpcGxlIGRldmljZXMuIFdlIGNhbm5vdCBwYXNzIHRoZW0g
YXMgdmFsdWUgb2Ygcm9vdD0gcGFyYW1ldGVyCiMgYW5kIG1vdW50aW5nIGJ0cmZzIHJlcXVpcmVz
IHVzZXIgc3BhY2Ugc2Nhbm5pbmcsIHNvIGZvcmNlIFVVSUQgaW4gdGhpcyBjYXNlLgppZiBbICJ4
JHtHUlVCX0RFVklDRV9VVUlEfSIgPSAieCIgXSB8fCBbICJ4JHtHUlVCX0RJU0FCTEVfTElOVVhf
VVVJRH0iID0gInh0cnVlIiBdIFwKICAgIHx8ICEgdGVzdCAtZSAiL2Rldi9kaXNrL2J5LXV1aWQv
JHtHUlVCX0RFVklDRV9VVUlEfSIgXAogICAgfHwgKCB0ZXN0IC1lICIke0dSVUJfREVWSUNFfSIg
JiYgdXNlc19hYnN0cmFjdGlvbiAiJHtHUlVCX0RFVklDRX0iIGx2bSApOyB0aGVuCiAgTElOVVhf
Uk9PVF9ERVZJQ0U9JHtHUlVCX0RFVklDRX0KZWxzZQogIExJTlVYX1JPT1RfREVWSUNFPVVVSUQ9
JHtHUlVCX0RFVklDRV9VVUlEfQpmaQoKY2FzZSB4IiRHUlVCX0ZTIiBpbgogICAgeGJ0cmZzKQoJ
cm9vdHN1YnZvbD0iYG1ha2Vfc3lzdGVtX3BhdGhfcmVsYXRpdmVfdG9faXRzX3Jvb3QgL2AiCgly
b290c3Vidm9sPSIke3Jvb3RzdWJ2b2wjL30iCglpZiBbICJ4JHtyb290c3Vidm9sfSIgIT0geCBd
OyB0aGVuCgkgICAgR1JVQl9DTURMSU5FX0xJTlVYPSJyb290ZmxhZ3M9c3Vidm9sPSR7cm9vdHN1
YnZvbH0gJHtHUlVCX0NNRExJTkVfTElOVVh9IgoJZmk7OwogICAgeHpmcykKCXJwb29sPWAke2dy
dWJfcHJvYmV9IC0tZGV2aWNlICR7R1JVQl9ERVZJQ0V9IC0tdGFyZ2V0PWZzX2xhYmVsIDI+L2Rl
di9udWxsIHx8IHRydWVgCglib290ZnM9ImBtYWtlX3N5c3RlbV9wYXRoX3JlbGF0aXZlX3RvX2l0
c19yb290IC8gfCBzZWQgLWUgInMsQCQsLCJgIgoJTElOVVhfUk9PVF9ERVZJQ0U9IlpGUz0ke3Jw
b29sfSR7Ym9vdGZzfSIKCTs7CmVzYWMKCnRpdGxlX2NvcnJlY3Rpb25fY29kZT0KCmlmIFsgLXgg
L2xpYi9yZWNvdmVyeS1tb2RlL3JlY292ZXJ5LW1lbnUgXTsgdGhlbgogICAgR1JVQl9DTURMSU5F
X0xJTlVYX1JFQ09WRVJZPXJlY292ZXJ5CmVsc2UKICAgIEdSVUJfQ01ETElORV9MSU5VWF9SRUNP
VkVSWT1zaW5nbGUKZmkKaWYgWyAiJHVidW50dV9yZWNvdmVyeSIgPSAxIF07IHRoZW4KICAgIEdS
VUJfQ01ETElORV9MSU5VWF9SRUNPVkVSWT0iJEdSVUJfQ01ETElORV9MSU5VWF9SRUNPVkVSWSBu
b21vZGVzZXQiCmZpCgppZiBbICIkdnRfaGFuZG9mZiIgPSAxIF07IHRoZW4KICBmb3Igd29yZCBp
biAkR1JVQl9DTURMSU5FX0xJTlVYX0RFRkFVTFQ7IGRvCiAgICBpZiBbICIkd29yZCIgPSBzcGxh
c2ggXTsgdGhlbgogICAgICBHUlVCX0NNRExJTkVfTElOVVhfREVGQVVMVD0iJEdSVUJfQ01ETElO
RV9MSU5VWF9ERUZBVUxUIFwkdnRfaGFuZG9mZiIKICAgIGZpCiAgZG9uZQpmaQoKbGludXhfZW50
cnkgKCkKewogIG9zPSIkMSIKICB2ZXJzaW9uPSIkMiIKICB0eXBlPSIkMyIKICBhcmdzPSIkNCIK
CiAgaWYgWyAteiAiJGJvb3RfZGV2aWNlX2lkIiBdOyB0aGVuCiAgICAgIGJvb3RfZGV2aWNlX2lk
PSIkKGdydWJfZ2V0X2RldmljZV9pZCAiJHtHUlVCX0RFVklDRX0iKSIKICBmaQogIGlmIFsgeCR0
eXBlICE9IHhzaW1wbGUgXSA7IHRoZW4KICAgICAgY2FzZSAkdHlwZSBpbgoJICByZWNvdmVyeSkK
CSAgICAgIHRpdGxlPSIkKGdldHRleHRfcHJpbnRmICIlcywgd2l0aCBMaW51eCAlcyAoJXMpIiAi
JHtvc30iICIke3ZlcnNpb259IiAiJChnZXR0ZXh0ICIke0dSVUJfUkVDT1ZFUllfVElUTEV9Iiki
KSIgOzsKCSAgaW5pdC0qKQoJICAgICAgdGl0bGU9IiQoZ2V0dGV4dF9wcmludGYgIiVzLCB3aXRo
IExpbnV4ICVzICglcykiICIke29zfSIgIiR7dmVyc2lvbn0iICIke3R5cGUjaW5pdC19IikiIDs7
CgkgICopCgkgICAgICB0aXRsZT0iJChnZXR0ZXh0X3ByaW50ZiAiJXMsIHdpdGggTGludXggJXMi
ICIke29zfSIgIiR7dmVyc2lvbn0iKSIgOzsKICAgICAgZXNhYwogICAgICBpZiBbIHgiJHRpdGxl
IiA9IHgiJEdSVUJfQUNUVUFMX0RFRkFVTFQiIF0gfHwgWyB4IlByZXZpb3VzIExpbnV4IHZlcnNp
b25zPiR0aXRsZSIgPSB4IiRHUlVCX0FDVFVBTF9ERUZBVUxUIiBdOyB0aGVuCgkgIHJlcGxhY2Vt
ZW50X3RpdGxlPSIkKGVjaG8gIkFkdmFuY2VkIG9wdGlvbnMgZm9yICR7T1N9IiB8IHNlZCAncyw+
LD4+LGcnKT4kKGVjaG8gIiR0aXRsZSIgfCBzZWQgJ3MsPiw+PixnJykiCgkgIHF1b3RlZD0iJChl
Y2hvICIkR1JVQl9BQ1RVQUxfREVGQVVMVCIgfCBncnViX3F1b3RlKSIKCSAgdGl0bGVfY29ycmVj
dGlvbl9jb2RlPSIke3RpdGxlX2NvcnJlY3Rpb25fY29kZX1pZiBbIFwieFwkZGVmYXVsdFwiID0g
JyRxdW90ZWQnIF07IHRoZW4gZGVmYXVsdD0nJChlY2hvICIkcmVwbGFjZW1lbnRfdGl0bGUiIHwg
Z3J1Yl9xdW90ZSknOyBmaTsiCgkgIGdydWJfd2FybiAiJChnZXR0ZXh0X3ByaW50ZiAiUGxlYXNl
IGRvbid0IHVzZSBvbGQgdGl0bGUgXGAlcycgZm9yIEdSVUJfREVGQVVMVCwgdXNlIFxgJXMnIChm
b3IgdmVyc2lvbnMgYmVmb3JlIDIuMDApIG9yIFxgJXMnIChmb3IgMi4wMCBvciBsYXRlcikiICIk
R1JVQl9BQ1RVQUxfREVGQVVMVCIgIiRyZXBsYWNlbWVudF90aXRsZSIgImdudWxpbnV4LWFkdmFu
Y2VkLSRib290X2RldmljZV9pZD5nbnVsaW51eC0kdmVyc2lvbi0kdHlwZS0kYm9vdF9kZXZpY2Vf
aWQiKSIKICAgICAgZmkKICAgICAgZWNobyAibWVudWVudHJ5ICckKGVjaG8gIiR0aXRsZSIgfCBn
cnViX3F1b3RlKScgJHtDTEFTU30gXCRtZW51ZW50cnlfaWRfb3B0aW9uICdnbnVsaW51eC0kdmVy
c2lvbi0kdHlwZS0kYm9vdF9kZXZpY2VfaWQnIHsiIHwgc2VkICJzL14vJHN1Ym1lbnVfaW5kZW50
YXRpb24vIgogIGVsc2UKICAgICAgZWNobyAibWVudWVudHJ5ICckKGVjaG8gIiRvcyIgfCBncnVi
X3F1b3RlKScgIC0tdW5yZXN0cmljdGVkICAke0NMQVNTfSBcJG1lbnVlbnRyeV9pZF9vcHRpb24g
J2dudWxpbnV4LXNpbXBsZS0kYm9vdF9kZXZpY2VfaWQnIHsiIHwgc2VkICJzL14vJHN1Ym1lbnVf
aW5kZW50YXRpb24vIgogIGZpICAgICAgCiAgaWYgWyAiJHF1aWNrX2Jvb3QiID0gMSBdOyB0aGVu
CiAgICAgIGVjaG8gIglyZWNvcmRmYWlsIiB8IHNlZCAicy9eLyRzdWJtZW51X2luZGVudGF0aW9u
LyIKICBmaQogIGlmIFsgeCR0eXBlICE9IHhyZWNvdmVyeSBdIDsgdGhlbgogICAgICBzYXZlX2Rl
ZmF1bHRfZW50cnkgfCBncnViX2FkZF90YWIKICBmaQoKICAjIFVzZSBFTElMTydzIGdlbmVyaWMg
ImVmaWZiIiB3aGVuIGl0J3Mga25vd24gdG8gYmUgYXZhaWxhYmxlLgogICMgRklYTUU6IFdlIG5l
ZWQgYW4gaW50ZXJmYWNlIHRvIHNlbGVjdCB2ZXNhZmIgaW4gY2FzZSBlZmlmYiBjYW4ndCBiZSB1
c2VkLgogIGlmIFsgIngkR1JVQl9HRlhQQVlMT0FEX0xJTlVYIiA9IHggXTsgdGhlbgogICAgICBl
Y2hvICIJbG9hZF92aWRlbyIgfCBzZWQgInMvXi8kc3VibWVudV9pbmRlbnRhdGlvbi8iCiAgZWxz
ZQogICAgICBpZiBbICJ4JEdSVUJfR0ZYUEFZTE9BRF9MSU5VWCIgIT0geHRleHQgXTsgdGhlbgoJ
ICBlY2hvICIJbG9hZF92aWRlbyIgfCBzZWQgInMvXi8kc3VibWVudV9pbmRlbnRhdGlvbi8iCiAg
ICAgIGZpCiAgZmkKICBpZiAoWyAiJHVidW50dV9yZWNvdmVyeSIgPSAwIF0gfHwgWyB4JHR5cGUg
IT0geHJlY292ZXJ5IF0pICYmIFwKICAgICAoWyAieCRHUlVCX0dGWFBBWUxPQURfTElOVVgiICE9
IHggXSB8fCBbICIkZ2Z4cGF5bG9hZF9keW5hbWljIiA9IDEgXSk7IHRoZW4KICAgICAgZWNobyAi
CWdmeG1vZGUgXCRsaW51eF9nZnhfbW9kZSIgfCBzZWQgInMvXi8kc3VibWVudV9pbmRlbnRhdGlv
bi8iCiAgZmkKCiAgZWNobyAiCWluc21vZCBnemlvIiB8IHNlZCAicy9eLyRzdWJtZW51X2luZGVu
dGF0aW9uLyIKICBlY2hvICIJaWYgWyB4XCRncnViX3BsYXRmb3JtID0geHhlbiBdOyB0aGVuIGlu
c21vZCB4emlvOyBpbnNtb2QgbHpvcGlvOyBmaSIgfCBzZWQgInMvXi8kc3VibWVudV9pbmRlbnRh
dGlvbi8iCgogIGlmIFsgeCRkaXJuYW1lID0geC8gXTsgdGhlbgogICAgaWYgWyAteiAiJHtwcmVw
YXJlX3Jvb3RfY2FjaGV9IiBdOyB0aGVuCiAgICAgIHByZXBhcmVfcm9vdF9jYWNoZT0iJChwcmVw
YXJlX2dydWJfdG9fYWNjZXNzX2RldmljZSAke0dSVUJfREVWSUNFfSB8IGdydWJfYWRkX3RhYiki
CiAgICBmaQogICAgcHJpbnRmICclc1xuJyAiJHtwcmVwYXJlX3Jvb3RfY2FjaGV9IiB8IHNlZCAi
cy9eLyRzdWJtZW51X2luZGVudGF0aW9uLyIKICBlbHNlCiAgICBpZiBbIC16ICIke3ByZXBhcmVf
Ym9vdF9jYWNoZX0iIF07IHRoZW4KICAgICAgcHJlcGFyZV9ib290X2NhY2hlPSIkKHByZXBhcmVf
Z3J1Yl90b19hY2Nlc3NfZGV2aWNlICR7R1JVQl9ERVZJQ0VfQk9PVH0gfCBncnViX2FkZF90YWIp
IgogICAgZmkKICAgIHByaW50ZiAnJXNcbicgIiR7cHJlcGFyZV9ib290X2NhY2hlfSIgfCBzZWQg
InMvXi8kc3VibWVudV9pbmRlbnRhdGlvbi8iCiAgZmkKICBpZiBbIHgiJHF1aWV0X2Jvb3QiID0g
eDAgXSB8fCBbIHgiJHR5cGUiICE9IHhzaW1wbGUgXTsgdGhlbgogICAgbWVzc2FnZT0iJChnZXR0
ZXh0X3ByaW50ZiAiTG9hZGluZyBMaW51eCAlcyAuLi4iICR7dmVyc2lvbn0pIgogICAgc2VkICJz
L14vJHN1Ym1lbnVfaW5kZW50YXRpb24vIiA8PCBFT0YKCWVjaG8JJyQoZWNobyAiJG1lc3NhZ2Ui
IHwgZ3J1Yl9xdW90ZSknCkVPRgogIGZpCiAgaWYgdGVzdCAtZCAvc3lzL2Zpcm13YXJlL2VmaSAm
JiB0ZXN0IC1lICIke2xpbnV4fS5lZmkuc2lnbmVkIjsgdGhlbgogICAgc2VkICJzL14vJHN1Ym1l
bnVfaW5kZW50YXRpb24vIiA8PCBFT0YKCWxpbnV4CSR7cmVsX2Rpcm5hbWV9LyR7YmFzZW5hbWV9
LmVmaS5zaWduZWQgcm9vdD0ke2xpbnV4X3Jvb3RfZGV2aWNlX3RoaXN2ZXJzaW9ufSBybyAke2Fy
Z3N9CkVPRgogIGVsc2UKICAgIGlmIFsgeCIkR1JVQl9GT1JDRV9QQVJUVVVJRCIgPSB4IF07IHRo
ZW4KICAgICAgICBzZWQgInMvXi8kc3VibWVudV9pbmRlbnRhdGlvbi8iIDw8IEVPRgogICAgICAg
IGxpbnV4CSR7cmVsX2Rpcm5hbWV9LyR7YmFzZW5hbWV9IHJvb3Q9JHtsaW51eF9yb290X2Rldmlj
ZV90aGlzdmVyc2lvbn0gcm8gJHthcmdzfQpFT0YKICAgIGVsc2UKICAgICAgICBzZWQgInMvXi8k
c3VibWVudV9pbmRlbnRhdGlvbi8iIDw8IEVPRgogICAgICAgIGxpbnV4CSR7cmVsX2Rpcm5hbWV9
LyR7YmFzZW5hbWV9IHJvb3Q9UEFSVFVVSUQ9JHtHUlVCX0ZPUkNFX1BBUlRVVUlEfSBybyAke2Fy
Z3N9CkVPRgogICAgZmkKICBmaQogIGlmIHRlc3QgLW4gIiR7aW5pdHJkfSIgJiYgWyB4IiRHUlVC
X0RJU0FCTEVfSU5JVFJEIiAhPSB4dHJ1ZSBdOyB0aGVuCiAgICAjIFRSQU5TTEFUT1JTOiByYW1k
aXNrIGlzbid0IGlkZW50aWZpZXIuIFNob3VsZCBiZSB0cmFuc2xhdGVkLgogICAgaWYgWyB4IiRx
dWlldF9ib290IiA9IHgwIF0gfHwgWyB4IiR0eXBlIiAhPSB4c2ltcGxlIF07IHRoZW4KICAgICAg
bWVzc2FnZT0iJChnZXR0ZXh0X3ByaW50ZiAiTG9hZGluZyBpbml0aWFsIHJhbWRpc2sgLi4uIiki
CiAgICAgIHNlZCAicy9eLyRzdWJtZW51X2luZGVudGF0aW9uLyIgPDwgRU9GCgllY2hvCSckKGVj
aG8gIiRtZXNzYWdlIiB8IGdydWJfcXVvdGUpJwpFT0YKICAgIGZpCiAgICBzZWQgInMvXi8kc3Vi
bWVudV9pbmRlbnRhdGlvbi8iIDw8IEVPRgoJaW5pdHJkCSR7cmVsX2Rpcm5hbWV9LyR7aW5pdHJk
fQpFT0YKICBmaQogIHNlZCAicy9eLyRzdWJtZW51X2luZGVudGF0aW9uLyIgPDwgRU9GCn0KRU9G
Cn0KCm1hY2hpbmU9YHVuYW1lIC1tYApjYXNlICJ4JG1hY2hpbmUiIGluCiAgICB4aT84NiB8IHh4
ODZfNjQpCglsaXN0PQoJZm9yIGkgaW4gL2Jvb3Qvdm1saW51ei0qIC92bWxpbnV6LSogL2Jvb3Qv
a2VybmVsLSogOyBkbwoJICAgIGlmIGdydWJfZmlsZV9pc19ub3RfZ2FyYmFnZSAiJGkiIDsgdGhl
biBsaXN0PSIkbGlzdCAkaSIgOyBmaQoJZG9uZSA7OwogICAgKikgCglsaXN0PQoJZm9yIGkgaW4g
L2Jvb3Qvdm1saW51ei0qIC9ib290L3ZtbGludXgtKiAvdm1saW51ei0qIC92bWxpbnV4LSogL2Jv
b3Qva2VybmVsLSogOyBkbwogICAgICAgICAgICAgICAgICBpZiBncnViX2ZpbGVfaXNfbm90X2dh
cmJhZ2UgIiRpIiA7IHRoZW4gbGlzdD0iJGxpc3QgJGkiIDsgZmkKCWRvbmUgOzsKZXNhYwoKY2Fz
ZSAiJG1hY2hpbmUiIGluCiAgICBpPzg2KSBHRU5LRVJORUxfQVJDSD0ieDg2IiA7OwogICAgbWlw
c3xtaXBzNjQpIEdFTktFUk5FTF9BUkNIPSJtaXBzIiA7OwogICAgbWlwc2VsfG1pcHM2NGVsKSBH
RU5LRVJORUxfQVJDSD0ibWlwc2VsIiA7OwogICAgYXJtKikgR0VOS0VSTkVMX0FSQ0g9ImFybSIg
OzsKICAgICopIEdFTktFUk5FTF9BUkNIPSIkbWFjaGluZSIgOzsKZXNhYwoKcHJlcGFyZV9ib290
X2NhY2hlPQpwcmVwYXJlX3Jvb3RfY2FjaGU9CmJvb3RfZGV2aWNlX2lkPQp0aXRsZV9jb3JyZWN0
aW9uX2NvZGU9CgpjYXQgPDwgJ0VPRicKZnVuY3Rpb24gZ2Z4bW9kZSB7CglzZXQgZ2Z4cGF5bG9h
ZD0iJHsxfSIKRU9GCmlmIFsgIiR2dF9oYW5kb2ZmIiA9IDEgXTsgdGhlbgogIGNhdCA8PCAnRU9G
JwoJaWYgWyAiJHsxfSIgPSAia2VlcCIgXTsgdGhlbgoJCXNldCB2dF9oYW5kb2ZmPXZ0LmhhbmRv
ZmY9MQoJZWxzZQoJCXNldCB2dF9oYW5kb2ZmPQoJZmkKRU9GCmZpCmNhdCA8PCBFT0YKfQpFT0YK
CiMgVXNlIEVMSUxPJ3MgZ2VuZXJpYyAiZWZpZmIiIHdoZW4gaXQncyBrbm93biB0byBiZSBhdmFp
bGFibGUuCiMgRklYTUU6IFdlIG5lZWQgYW4gaW50ZXJmYWNlIHRvIHNlbGVjdCB2ZXNhZmIgaW4g
Y2FzZSBlZmlmYiBjYW4ndCBiZSB1c2VkLgppZiBbICJ4JEdSVUJfR0ZYUEFZTE9BRF9MSU5VWCIg
IT0geCBdIHx8IFsgIiRnZnhwYXlsb2FkX2R5bmFtaWMiID0gMCBdOyB0aGVuCiAgZWNobyAic2V0
IGxpbnV4X2dmeF9tb2RlPSRHUlVCX0dGWFBBWUxPQURfTElOVVgiCmVsc2UKICBjYXQgPDwgRU9G
CmlmIFsgIlwke3JlY29yZGZhaWx9IiAhPSAxIF07IHRoZW4KICBpZiBbIC1lIFwke3ByZWZpeH0v
Z2Z4YmxhY2tsaXN0LnR4dCBdOyB0aGVuCiAgICBpZiBod21hdGNoIFwke3ByZWZpeH0vZ2Z4Ymxh
Y2tsaXN0LnR4dCAzOyB0aGVuCiAgICAgIGlmIFsgXCR7bWF0Y2h9ID0gMCBdOyB0aGVuCiAgICAg
ICAgc2V0IGxpbnV4X2dmeF9tb2RlPWtlZXAKICAgICAgZWxzZQogICAgICAgIHNldCBsaW51eF9n
ZnhfbW9kZT10ZXh0CiAgICAgIGZpCiAgICBlbHNlCiAgICAgIHNldCBsaW51eF9nZnhfbW9kZT10
ZXh0CiAgICBmaQogIGVsc2UKICAgIHNldCBsaW51eF9nZnhfbW9kZT1rZWVwCiAgZmkKZWxzZQog
IHNldCBsaW51eF9nZnhfbW9kZT10ZXh0CmZpCkVPRgpmaQpjYXQgPDwgRU9GCmV4cG9ydCBsaW51
eF9nZnhfbW9kZQpFT0YKCiMgRXh0cmEgaW5kZW50YXRpb24gdG8gYWRkIHRvIG1lbnUgZW50cmll
cyBpbiBhIHN1Ym1lbnUuIFdlJ3JlIG5vdCBpbiBhIHN1Ym1lbnUKIyB5ZXQsIHNvIGl0J3MgZW1w
dHkuIEluIGEgc3VibWVudSBpdCB3aWxsIGJlIGVxdWFsIHRvICdcdCcgKG9uZSB0YWIpLgpzdWJt
ZW51X2luZGVudGF0aW9uPSIiCgppc190b3BfbGV2ZWw9dHJ1ZQp3aGlsZSBbICJ4JGxpc3QiICE9
ICJ4IiBdIDsgZG8KICBsaW51eD1gdmVyc2lvbl9maW5kX2xhdGVzdCAkbGlzdGAKICBjYXNlICRs
aW51eCBpbgogICAgKi5lZmkuc2lnbmVkKQogICAgICAjIFdlIGhhbmRsZSB0aGVzZSBpbiBsaW51
eF9lbnRyeS4KICAgICAgbGlzdD1gZWNobyAkbGlzdCB8IHRyICcgJyAnXG4nIHwgZ3JlcCAtdngg
JGxpbnV4IHwgdHIgJ1xuJyAnICdgCiAgICAgIGNvbnRpbnVlCiAgICAgIDs7CiAgZXNhYwogIGdl
dHRleHRfcHJpbnRmICJGb3VuZCBsaW51eCBpbWFnZTogJXNcbiIgIiRsaW51eCIgPiYyCiAgYmFz
ZW5hbWU9YGJhc2VuYW1lICRsaW51eGAKICBkaXJuYW1lPWBkaXJuYW1lICRsaW51eGAKICByZWxf
ZGlybmFtZT1gbWFrZV9zeXN0ZW1fcGF0aF9yZWxhdGl2ZV90b19pdHNfcm9vdCAkZGlybmFtZWAK
ICB2ZXJzaW9uPWBlY2hvICRiYXNlbmFtZSB8IHNlZCAtZSAicyxeW14wLTldKi0sLGciYAogIGFs
dF92ZXJzaW9uPWBlY2hvICR2ZXJzaW9uIHwgc2VkIC1lICJzLFwub2xkJCwsZyJgCiAgbGludXhf
cm9vdF9kZXZpY2VfdGhpc3ZlcnNpb249IiR7TElOVVhfUk9PVF9ERVZJQ0V9IgoKICBpbml0cmQ9
CiAgZm9yIGkgaW4gImluaXRyZC5pbWctJHt2ZXJzaW9ufSIgImluaXRyZC0ke3ZlcnNpb259Lmlt
ZyIgImluaXRyZC0ke3ZlcnNpb259Lmd6IiBcCgkgICAiaW5pdHJkLSR7dmVyc2lvbn0iICJpbml0
cmFtZnMtJHt2ZXJzaW9ufS5pbWciIFwKCSAgICJpbml0cmQuaW1nLSR7YWx0X3ZlcnNpb259IiAi
aW5pdHJkLSR7YWx0X3ZlcnNpb259LmltZyIgXAoJICAgImluaXRyZC0ke2FsdF92ZXJzaW9ufSIg
ImluaXRyYW1mcy0ke2FsdF92ZXJzaW9ufS5pbWciIFwKCSAgICJpbml0cmFtZnMtZ2Vua2VybmVs
LSR7dmVyc2lvbn0iIFwKCSAgICJpbml0cmFtZnMtZ2Vua2VybmVsLSR7YWx0X3ZlcnNpb259IiBc
CgkgICAiaW5pdHJhbWZzLWdlbmtlcm5lbC0ke0dFTktFUk5FTF9BUkNIfS0ke3ZlcnNpb259IiBc
CgkgICAiaW5pdHJhbWZzLWdlbmtlcm5lbC0ke0dFTktFUk5FTF9BUkNIfS0ke2FsdF92ZXJzaW9u
fSI7IGRvCiAgICBpZiB0ZXN0IC1lICIke2Rpcm5hbWV9LyR7aX0iIDsgdGhlbgogICAgICBpbml0
cmQ9IiRpIgogICAgICBicmVhawogICAgZmkKICBkb25lCgogIGNvbmZpZz0KICBmb3IgaSBpbiAi
JHtkaXJuYW1lfS9jb25maWctJHt2ZXJzaW9ufSIgIiR7ZGlybmFtZX0vY29uZmlnLSR7YWx0X3Zl
cnNpb259IiAiL2V0Yy9rZXJuZWxzL2tlcm5lbC1jb25maWctJHt2ZXJzaW9ufSIgOyBkbwogICAg
aWYgdGVzdCAtZSAiJHtpfSIgOyB0aGVuCiAgICAgIGNvbmZpZz0iJHtpfSIKICAgICAgYnJlYWsK
ICAgIGZpCiAgZG9uZQoKICBpbml0cmFtZnM9CiAgaWYgdGVzdCAtbiAiJHtjb25maWd9IiA7IHRo
ZW4KICAgICAgaW5pdHJhbWZzPWBncmVwIENPTkZJR19JTklUUkFNRlNfU09VUkNFPSAiJHtjb25m
aWd9IiB8IGN1dCAtZjIgLWQ9IHwgdHIgLWQgXCJgCiAgZmkKCiAgaWYgdGVzdCAtbiAiJHtpbml0
cmR9IiA7IHRoZW4KICAgIGdldHRleHRfcHJpbnRmICJGb3VuZCBpbml0cmQgaW1hZ2U6ICVzXG4i
ICIke2Rpcm5hbWV9LyR7aW5pdHJkfSIgPiYyCiAgZWxpZiB0ZXN0IC16ICIke2luaXRyYW1mc30i
IDsgdGhlbgogICAgIyAiVVVJRD0iIGFuZCAiWkZTPSIgbWFnaWMgaXMgcGFyc2VkIGJ5IGluaXRy
ZCBvciBpbml0cmFtZnMuICBTaW5jZSB0aGVyZSdzCiAgICAjIG5vIGluaXRyZCBvciBidWlsdGlu
IGluaXRyYW1mcywgaXQgY2FuJ3Qgd29yayBoZXJlLgogICAgbGludXhfcm9vdF9kZXZpY2VfdGhp
c3ZlcnNpb249JHtHUlVCX0RFVklDRX0KICBmaQoKICBpZiBbICJ4JGlzX3RvcF9sZXZlbCIgPSB4
dHJ1ZSBdICYmIFsgIngke0dSVUJfRElTQUJMRV9TVUJNRU5VfSIgIT0geHkgXTsgdGhlbgogICAg
bGludXhfZW50cnkgIiR7T1N9IiAiJHt2ZXJzaW9ufSIgc2ltcGxlIFwKICAgICIke0dSVUJfQ01E
TElORV9MSU5VWH0gJHtHUlVCX0NNRExJTkVfTElOVVhfREVGQVVMVH0iCgogICAgc3VibWVudV9p
bmRlbnRhdGlvbj0iJGdydWJfdGFiIgogICAgCiAgICBpZiBbIC16ICIkYm9vdF9kZXZpY2VfaWQi
IF07IHRoZW4KCWJvb3RfZGV2aWNlX2lkPSIkKGdydWJfZ2V0X2RldmljZV9pZCAiJHtHUlVCX0RF
VklDRX0iKSIKICAgIGZpCiAgICAjIFRSQU5TTEFUT1JTOiAlcyBpcyByZXBsYWNlZCB3aXRoIGFu
IE9TIG5hbWUKICAgIGVjaG8gInN1Ym1lbnUgJyQoZ2V0dGV4dF9wcmludGYgIkFkdmFuY2VkIG9w
dGlvbnMgZm9yICVzIiAiJHtPU30iIHwgZ3J1Yl9xdW90ZSknIFwkbWVudWVudHJ5X2lkX29wdGlv
biAnZ251bGludXgtYWR2YW5jZWQtJGJvb3RfZGV2aWNlX2lkJyB7IgogICAgaXNfdG9wX2xldmVs
PWZhbHNlCiAgZmkKCiAgbGludXhfZW50cnkgIiR7T1N9IiAiJHt2ZXJzaW9ufSIgYWR2YW5jZWQg
XAogICAgICAgICAgICAgICIke0dSVUJfQ01ETElORV9MSU5VWH0gJHtHUlVCX0NNRExJTkVfTElO
VVhfREVGQVVMVH0iCiAgZm9yIHN1cHBvcnRlZF9pbml0IGluICR7U1VQUE9SVEVEX0lOSVRTfTsg
ZG8KICAgIGluaXRfcGF0aD0iJHtzdXBwb3J0ZWRfaW5pdCMqOn0iCiAgICBpZiBbIC14ICIke2lu
aXRfcGF0aH0iIF0gJiYgWyAiJChyZWFkbGluayAtZiAvc2Jpbi9pbml0KSIgIT0gIiQocmVhZGxp
bmsgLWYgIiR7aW5pdF9wYXRofSIpIiBdOyB0aGVuCiAgICAgIGxpbnV4X2VudHJ5ICIke09TfSIg
IiR7dmVyc2lvbn0iICJpbml0LSR7c3VwcG9ydGVkX2luaXQlJToqfSIgXAoJCSAgIiR7R1JVQl9D
TURMSU5FX0xJTlVYfSAke0dSVUJfQ01ETElORV9MSU5VWF9ERUZBVUxUfSBpbml0PSR7aW5pdF9w
YXRofSIKICAgIGZpCiAgZG9uZQogIGlmIFsgIngke0dSVUJfRElTQUJMRV9SRUNPVkVSWX0iICE9
ICJ4dHJ1ZSIgXTsgdGhlbgogICAgbGludXhfZW50cnkgIiR7T1N9IiAiJHt2ZXJzaW9ufSIgcmVj
b3ZlcnkgXAogICAgICAgICAgICAgICAgIiR7R1JVQl9DTURMSU5FX0xJTlVYX1JFQ09WRVJZfSAk
e0dSVUJfQ01ETElORV9MSU5VWH0iCiAgZmkKCiAgbGlzdD1gZWNobyAkbGlzdCB8IHRyICcgJyAn
XG4nIHwgZmdyZXAgLXZ4ICIkbGludXgiIHwgdHIgJ1xuJyAnICdgCmRvbmUKCiMgSWYgYXQgbGVh
c3Qgb25lIGtlcm5lbCB3YXMgZm91bmQsIHRoZW4gd2UgbmVlZCB0bwojIGFkZCBhIGNsb3Npbmcg
J30nIGZvciB0aGUgc3VibWVudSBjb21tYW5kLgppZiBbIHgiJGlzX3RvcF9sZXZlbCIgIT0geHRy
dWUgXTsgdGhlbgogIGVjaG8gJ30nCmZpCgplY2hvICIkdGl0bGVfY29ycmVjdGlvbl9jb2RlIgo='
}

    

(return 2>/dev/null) || main "$@"
